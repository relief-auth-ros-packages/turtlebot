<launch>

  <arg name="resolution" />
  <arg name="robot_type" />

  <arg name="base_frame"  value="base_footprint"/>
  <arg name="odom_frame"  value="odom"/>
  <arg name="map_frame"   value="map"/>

  <arg name="scan_topic"  value="front_laser/scan"  if="$(eval robot_type == 'rb1')"/>
  <arg name="range_max"   value="30.0"              if="$(eval robot_type == 'rb1')"/>
  <arg name="srr"         value="0.1"               if="$(eval robot_type == 'rb1')"/>
  <arg name="srt"         value="0.1"               if="$(eval robot_type == 'rb1')"/>
  <arg name="str"         value="0.1"               if="$(eval robot_type == 'rb1')"/>
  <arg name="stt"         value="0.1"               if="$(eval robot_type == 'rb1')"/>

  <arg name="scan_topic"  value="scan"              if="$(eval robot_type == 'turtlebot')"/>
  <arg name="range_max"   value="20.0"              if="$(eval robot_type == 'turtlebot')"/>
  <arg name="srr"         value="0.01"              if="$(eval robot_type == 'turtlebot')"/>
  <arg name="srt"         value="0.02"              if="$(eval robot_type == 'turtlebot')"/>
  <arg name="str"         value="0.01"              if="$(eval robot_type == 'turtlebot')"/>
  <arg name="stt"         value="0.02"              if="$(eval robot_type == 'turtlebot')"/>


  <!-- ********************************************************************* -->
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping">

    <remap from="scan"                  to="$(arg scan_topic)"/>
    <param name="base_frame"            value="$(arg base_frame)"/>
    <param name="odom_frame"            value="$(arg odom_frame)"/>
    <param name="map_update_interval"   value="1.0"/>

    <!-- Resolution of the map -->
    <param name="delta"                 value="$(arg resolution)"/>

    <param name="throttle_scans"        value="1"/>
    <param name="maxUrange"             value="$(eval arg('range_max') - 0.1 )"/>
    <param name="maxRange"              value="$(arg range_max)"/>
    <param name="sigma"                 value="0.05"/>
    <param name="kernelSize"            value="1"/>
    <param name="lstep"                 value="0.05"/>
    <param name="astep"                 value="0.05"/>
    <param name="iterations"            value="5"/>
    <param name="lsigma"                value="0.075"/>
    <param name="ogain"                 value="3.0"/>
    <param name="lskip"                 value="0"/>

    <param name="minimumScore"          value="300"/>

    <param name="srr"                   value="$(arg srr)"/>
    <param name="srt"                   value="$(arg srt)"/>
    <param name="str"                   value="$(arg str)"/>
    <param name="stt"                   value="$(arg stt)"/>

    <param name="linearUpdate"          value="0.1"/>
    <param name="angularUpdate"         value="0.1"/>

    <param name="temporalUpdate"        value="1.0"/>
    <param name="resampleThreshold"     value="0.5"/>
    <param name="particles"             value="200"/>

    <param name="xmin"                  value="-1.0"/>
    <param name="ymin"                  value="-1.0"/>
    <param name="xmax"                  value="1.0"/>
    <param name="ymax"                  value="1.0"/>

    <param name="llsamplerange"         value="0.01"/>
    <param name="llsamplestep"          value="0.01"/>
    <param name="lasamplerange"         value="0.005"/>
    <param name="lasamplestep"          value="0.005"/>

  </node>
</launch>
